<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earthquake Detection System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
            padding: 40px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
        }
        
        .card h2 {
            color: #667eea;
            font-size: 18px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .card-content {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
        }
        
        .pin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .pin-table th {
            background: #667eea;
            color: white;
            padding: 8px;
            text-align: left;
            font-size: 13px;
        }
        
        .pin-table td {
            padding: 8px;
            border-bottom: 1px solid #ddd;
            font-size: 13px;
        }
        
        .pin-table tr:nth-child(even) {
            background: #f0f0f0;
        }
        
        .code-section {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        .code-section .keyword {
            color: #569cd6;
        }
        
        .code-section .string {
            color: #ce9178;
        }
        
        .code-section .comment {
            color: #6a9955;
        }
        
        .code-section .number {
            color: #b5cea8;
        }
        
        h3 {
            color: #333;
            margin: 20px 0 10px 0;
            font-size: 16px;
        }
        
        .threshold-config {
            background: #fffbea;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .threshold-config strong {
            color: #d39e00;
        }
        
        .feature-list {
            list-style: none;
            margin: 10px 0;
        }
        
        .feature-list li {
            padding: 5px 0;
            color: #555;
        }
        
        .feature-list li:before {
            content: "‚úì ";
            color: #667eea;
            font-weight: bold;
            margin-right: 8px;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #d0d0d0;
        }
        
        .alert {
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåç Earthquake Detection System</h1>
        <p class="subtitle">Complete guide for ESP32-based seismic detection with ADXL345</p>
        
        <div class="alert">
            <strong>‚ö†Ô∏è Note:</strong> This guide provides complete setup instructions for your earthquake detection system. Follow all steps carefully for proper operation.
        </div>
        
        <div class="grid">
            <!-- Wiring Card -->
            <div class="card">
                <h2>üìå Wiring Connections</h2>
                <div class="card-content">
                    <table class="pin-table">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>ESP32 Pin</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>ADXL345 SDA</strong></td>
                                <td>GPIO 21</td>
                            </tr>
                            <tr>
                                <td><strong>ADXL345 SCL</strong></td>
                                <td>GPIO 22</td>
                            </tr>
                            <tr>
                                <td><strong>ADXL345 VCC</strong></td>
                                <td>3.3V</td>
                            </tr>
                            <tr>
                                <td><strong>ADXL345 GND</strong></td>
                                <td>GND</td>
                            </tr>
                            <tr>
                                <td><strong>OLED SDA</strong></td>
                                <td>GPIO 21</td>
                            </tr>
                            <tr>
                                <td><strong>OLED SCL</strong></td>
                                <td>GPIO 22</td>
                            </tr>
                            <tr>
                                <td><strong>OLED VCC</strong></td>
                                <td>3.3V</td>
                            </tr>
                            <tr>
                                <td><strong>OLED GND</strong></td>
                                <td>GND</td>
                            </tr>
                            <tr>
                                <td><strong>Buzzer (+)</strong></td>
                                <td>GPIO 2</td>
                            </tr>
                            <tr>
                                <td><strong>Buzzer (-)</strong></td>
                                <td>GND</td>
                            </tr>
                            <tr>
                                <td><strong>LED (+)</strong></td>
                                <td>GPIO 4</td>
                            </tr>
                            <tr>
                                <td><strong>LED (-)</strong></td>
                                <td>GND</td>
                            </tr>
                        </tbody>
                    </table>
                    <p style="margin-top: 10px; font-size: 12px; color: #666;">
                        <strong>Note:</strong> OLED and ADXL345 share the same I2C bus (GPIO 21 &amp; 22)
                    </p>
                </div>
            </div>
            
            <!-- Components Card -->
            <div class="card">
                <h2>üîß Components Required</h2>
                <div class="card-content">
                    <ul class="feature-list">
                        <li><strong>ESP32</strong> (38-pin DevKit)</li>
                        <li><strong>ADXL345</strong> (3-axis accelerometer)</li>
                        <li><strong>SSD1306 OLED</strong> (128x64 display)</li>
                        <li><strong>Active Buzzer</strong> (5V or 3.3V)</li>
                        <li><strong>LED</strong> (any color, with 220Œ© resistor)</li>
                        <li><strong>Jumper Wires</strong> (multiple)</li>
                        <li><strong>USB Cable</strong> (for programming)</li>
                        <li><strong>Power Supply</strong> (optional, for standalone operation)</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Libraries -->
        <h3>üìö Required Libraries (Install via Arduino IDE)</h3>
        <div class="code-section">
<span class="comment">// Add these libraries in Arduino IDE</span>
<span class="comment">// Tools ‚Üí Manage Libraries ‚Üí Search and Install:</span>

<span class="keyword">1.</span> Adafruit ADXL345
<span class="keyword">2.</span> Adafruit SSD1306
<span class="keyword">3.</span> Adafruit GFX
<span class="keyword">4.</span> Adafruit BusIO
        </div>
        
        <!-- Main Code -->
        <h3>üíª Arduino Sketch Code</h3>
        <div class="code-section">
<span class="comment">// Earthquake Detection System - ESP32</span>
<span class="comment">// Uses ADXL345 accelerometer with OLED display, LED, and Buzzer</span>

<span class="keyword">#include</span> <span class="string">&lt;Wire.h&gt;</span>
<span class="keyword">#include</span> <span class="string">&lt;Adafruit_ADXL345_U.h&gt;</span>
<span class="keyword">#include</span> <span class="string">&lt;Adafruit_SSD1306.h&gt;</span>
<span class="keyword">#include</span> <span class="string">&lt;Adafruit_GFX.h&gt;</span>

<span class="comment">// OLED Display Setup</span>
<span class="keyword">#define</span> SCREEN_WIDTH <span class="number">128</span>
<span class="keyword">#define</span> SCREEN_HEIGHT <span class="number">64</span>
<span class="keyword">#define</span> OLED_RESET -<span class="number">1</span>
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &amp;Wire, OLED_RESET);

<span class="comment">// ADXL345 Setup</span>
Adafruit_ADXL345_Unified accel = Adafruit_ADXL345_Unified(<span class="number">12345</span>);

<span class="comment">// Pin Definitions</span>
<span class="keyword">const</span> <span class="keyword">int</span> BUZZER_PIN = <span class="number">2</span>;
<span class="keyword">const</span> <span class="keyword">int</span> LED_PIN = <span class="number">4</span>;

<span class="comment">// Earthquake Detection Settings</span>
<span class="keyword">const</span> <span class="keyword">float</span> THRESHOLD = <span class="number">15.0</span>;  <span class="comment">// m/s¬≤ threshold</span>
<span class="keyword">const</span> <span class="keyword">int</span> ALARM_DURATION = <span class="number">5000</span>;  <span class="comment">// 5 seconds</span>
<span class="keyword">const</span> <span class="keyword">int</span> BUZZ_PATTERN = <span class="number">100</span>;  <span class="comment">// 100ms buzz duration</span>

<span class="keyword">float</span> maxAcceleration = <span class="number">0</span>;
<span class="keyword">unsigned</span> <span class="keyword">long</span> alarmStartTime = <span class="number">0</span>;
<span class="keyword">bool</span> alarmActive = <span class="keyword">false</span>;

<span class="keyword">void</span> setup() {
  Serial.begin(<span class="number">115200</span>);
  delay(<span class="number">100</span>);
  
  <span class="comment">// Initialize pins</span>
  pinMode(BUZZER_PIN, OUTPUT);
  pinMode(LED_PIN, OUTPUT);
  digitalWrite(BUZZER_PIN, LOW);
  digitalWrite(LED_PIN, LOW);
  
  <span class="comment">// Initialize OLED</span>
  <span class="keyword">if</span> (!display.begin(SSD1306_SWITCHCAPVCC, <span class="number">0x3C</span>)) {
    Serial.println(<span class="string">"OLED initialization failed"</span>);
    <span class="keyword">while</span> (<span class="number">1</span>);
  }
  display.clearDisplay();
  display.setTextSize(<span class="number">1</span>);
  display.setTextColor(SSD1306_WHITE);
  display.setCursor(<span class="number">0</span>, <span class="number">0</span>);
  display.println(<span class="string">"Initializing..."</span>);
  display.display();
  
  <span class="comment">// Initialize ADXL345</span>
  <span class="keyword">if</span> (!accel.begin()) {
    Serial.println(<span class="string">"ADXL345 not detected. Check wiring!"</span>);
    display.clearDisplay();
    display.setCursor(<span class="number">0</span>, <span class="number">0</span>);
    display.println(<span class="string">"ADXL345 Error"</span>);
    display.display();
    <span class="keyword">while</span> (<span class="number">1</span>);
  }
  
  <span class="comment">// Set sensor range to ¬±16g</span>
  accel.setRange(ADXL345_RANGE_16_G);
  
  <span class="comment">// Display setup complete</span>
  display.clearDisplay();
  display.setCursor(<span class="number">0</span>, <span class="number">0</span>);
  display.println(<span class="string">"Earthquake Detector"</span>);
  display.println(<span class="string">"Ready!"</span>);
  display.display();
  delay(<span class="number">2000</span>);
  
  Serial.println(<span class="string">"System Ready"</span>);
}

<span class="keyword">void</span> loop() {
  <span class="comment">// Get sensor event</span>
  sensors_event_t event;
  accel.getEvent(&amp;event);
  
  <span class="comment">// Calculate total acceleration magnitude</span>
  <span class="keyword">float</span> magnitude = sqrt(event.acceleration.x * event.acceleration.x +
                            event.acceleration.y * event.acceleration.y +
                            event.acceleration.z * event.acceleration.z);
  
  <span class="comment">// Update max acceleration</span>
  <span class="keyword">if</span> (magnitude &gt; maxAcceleration) {
    maxAcceleration = magnitude;
  }
  
  <span class="comment">// Check if earthquake detected</span>
  <span class="keyword">if</span> (magnitude &gt; THRESHOLD &amp;&amp; !alarmActive) {
    alarmActive = <span class="keyword">true</span>;
    alarmStartTime = millis();
    Serial.println(<span class="string">"‚ö†Ô∏è EARTHQUAKE DETECTED!"</span>);
  }
  
  <span class="comment">// Handle alarm timing</span>
  <span class="keyword">if</span> (alarmActive) {
    <span class="keyword">if</span> (millis() - alarmStartTime &lt; ALARM_DURATION) {
      <span class="comment">// Buzzer pattern: on/off</span>
      <span class="keyword">if</span> (((millis() - alarmStartTime) / BUZZ_PATTERN) % <span class="number">2</span> == <span class="number">0</span>) {
        digitalWrite(BUZZER_PIN, HIGH);
        digitalWrite(LED_PIN, HIGH);
      } <span class="keyword">else</span> {
        digitalWrite(BUZZER_PIN, LOW);
        digitalWrite(LED_PIN, LOW);
      }
    } <span class="keyword">else</span> {
      digitalWrite(BUZZER_PIN, LOW);
      digitalWrite(LED_PIN, LOW);
      alarmActive = <span class="keyword">false</span>;
      maxAcceleration = <span class="number">0</span>;
    }
  }
  
  <span class="comment">// Display data on OLED</span>
  updateDisplay(event.acceleration.x, event.acceleration.y, 
                event.acceleration.z, magnitude);
  
  delay(<span class="number">100</span>);
}

<span class="keyword">void</span> updateDisplay(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">float</span> z, <span class="keyword">float</span> mag) {
  display.clearDisplay();
  display.setTextSize(<span class="number">1</span>);
  display.setCursor(<span class="number">0</span>, <span class="number">0</span>);
  
  <span class="comment">// Title</span>
  display.println(<span class="string">"EARTHQUAKE DETECTOR"</span>);
  display.println(<span class="string">"-------------------"</span>);
  
  <span class="comment">// Acceleration values</span>
  display.print(<span class="string">"X:"</span>); display.print(x, <span class="number">1</span>); display.println(<span class="string">" m/s2"</span>);
  display.print(<span class="string">"Y:"</span>); display.print(y, <span class="number">1</span>); display.println(<span class="string">" m/s2"</span>);
  display.print(<span class="string">"Z:"</span>); display.print(z, <span class="number">1</span>); display.println(<span class="string">" m/s2"</span>);
  display.println(<span class="string">""</span>);
  
  <span class="comment">// Magnitude and status</span>
  display.print(<span class="string">"Magnitude: "</span>); display.println(mag, <span class="number">1</span>);
  display.print(<span class="string">"Max: "</span>); display.println(maxAcceleration, <span class="number">1</span>);
  
  <span class="comment">// Alert status</span>
  <span class="keyword">if</span> (alarmActive) {
    display.println(<span class="string">""</span>);
    display.println(<span class="string">"!!! ALERT !!!"</span>);
  } <span class="keyword">else</span> {
    display.println(<span class="string">""</span>);
    display.println(<span class="string">"Status: NORMAL"</span>);
  }
  
  display.display();
  
  <span class="comment">// Serial output</span>
  Serial.print(<span class="string">"X:"</span>); Serial.print(x); Serial.print(<span class="string">" Y:"</span>); Serial.print(y);
  Serial.print(<span class="string">" Z:"</span>); Serial.print(z); Serial.print(<span class="string">" | Mag:"</span>); Serial.println(mag);
}
        </div>
        
        <!-- Configuration -->
        <div class="threshold-config">
            <strong>‚öôÔ∏è Adjustable Parameters (in code):</strong>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li><strong>THRESHOLD (15.0):</strong> Acceleration level to trigger alarm (m/s¬≤). Increase for less sensitivity, decrease for more.</li>
                <li><strong>ALARM_DURATION (5000):</strong> How long alarm runs in milliseconds (5000 = 5 seconds).</li>
                <li><strong>BUZZ_PATTERN (100):</strong> Buzzer on/off interval in milliseconds.</li>
            </ul>
        </div>
        
        <!-- Steps -->
        <h3>üìã Installation Steps</h3>
        <div class="card">
            <div class="card-content">
                <ol style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Install Arduino IDE</strong> - Download from arduino.cc</li>
                    <li><strong>Add ESP32 Board Support</strong> - Go to Preferences ‚Üí Additional Boards Manager URLs, add: https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json</li>
                    <li><strong>Install Libraries</strong> - Tools ‚Üí Manage Libraries ‚Üí Install: Adafruit ADXL345, Adafruit SSD1306, Adafruit GFX, Adafruit BusIO</li>
                    <li><strong>Connect Hardware</strong> - Follow the wiring table above using jumper wires</li>
                    <li><strong>Copy Code</strong> - Paste the Arduino sketch above into Arduino IDE</li>
                    <li><strong>Select Board</strong> - Tools ‚Üí Board ‚Üí ESP32 ‚Üí ESP32 Dev Module</li>
                    <li><strong>Select Port</strong> - Tools ‚Üí Port ‚Üí Select your COM port</li>
                    <li><strong>Upload</strong> - Click Upload button (‚Üí arrow icon)</li>
                    <li><strong>Monitor</strong> - Open Serial Monitor (Ctrl+Shift+M) at 115200 baud</li>
                    <li><strong>Test</strong> - Gently shake the device to trigger the alarm</li>
                </ol>
            </div>
        </div>
        
        <!-- Troubleshooting -->
        <h3>üîß Troubleshooting</h3>
        <div class="card">
            <div class="card-content">
                <strong>ADXL345 not detected:</strong> Check SDA/SCL connections to GPIO 21/22, verify I2C address (0x53 default)<br><br>
                <strong>OLED not displaying:</strong> Verify 3.3V power, check I2C address (0x3C default with jumpers), try I2C scanner<br><br>
                <strong>Buzzer not sounding:</strong> Test with multimeter, check GPIO 2 output, verify buzzer polarity<br><br>
                <strong>LED not lighting:</strong> Add 220Œ© resistor in series, verify GPIO 4 pin connection, check LED polarity<br><br>
                <strong>Sensitivity too high/low:</strong> Adjust THRESHOLD value in code (try 10-20 range)
            </div>
        </div>
    </div>
</body>
</html>
